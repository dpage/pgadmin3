<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>31.5. Choosing a Connection</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="PostgreSQL 8.2.21 Documentation">
<link rel="up" href="ecpg.html" title="Chapter 31. ECPG - Embedded SQL in C">
<link rel="prev" href="ecpg-commands.html" title="31.4. Running SQL Commands">
<link rel="next" href="ecpg-variables.html" title="31.6. Using Host Variables">
<link rel="copyright" href="legalnotice.html" title="Legal Notice">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" title="31.5. Choosing a Connection">
<div class="titlepage"><div><div><h2 class="title" style="clear: both" id="ecpg-set-connection">31.5. Choosing a Connection</h2></div></div></div>
<p>   The SQL statements shown in the previous section are executed on
   the current connection, that is, the most recently opened one.  If
   an application needs to manage multiple connections, then there are
   two ways to handle this.
  </p>
<p>   The first option is to explicitly choose a connection for each SQL
   statement, for example
</p>
<pre class="programlisting">EXEC SQL AT <em class="replaceable"><code>connection-name</code></em> SELECT ...;</pre>
<p>
   This option is particularly suitable if the application needs to
   use several connections in mixed order.
      </p>
<p>      If your application uses multiple threads of execution, they cannot share a
      connection concurrently. You must either explicitly control access to the connection
      (using mutexes) or use a connection for each thread. If each thread uses its own connection,
      you will need to use the AT clause to specify which connection the thread will use.
  </p>
<p>   The second option is to execute a statement to switch the current
   connection.  That statement is:
</p>
<pre class="programlisting">EXEC SQL SET CONNECTION <em class="replaceable"><code>connection-name</code></em>;</pre>
<p>
   This option is particularly convenient if many statements are to be
   executed on the same connection.  It is not thread-aware.
  </p>
</div></body>
</html>
